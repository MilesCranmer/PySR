# Minimal Slurm configuration for PySR CI tests.
#
# Based on https://github.com/giovtorres/slurm-docker-cluster (simplified:
# no accounting database / slurmdbd).
ClusterName=pysr-test
SlurmctldHost=slurmctld

SlurmctldPidFile=/var/run/slurm/slurmctld.pid
SlurmctldPort=6817
SlurmdPidFile=/var/run/slurm/slurmd.pid
SlurmdPort=6818

SlurmdSpoolDir=/var/spool/slurm
StateSaveLocation=/var/lib/slurm
SlurmUser=slurm

AuthType=auth/munge
ProctrackType=proctrack/linuxproc
TaskPlugin=task/affinity
SelectType=select/cons_tres
SelectTypeParameters=CR_CPU
SchedulerType=sched/backfill
ReturnToService=1
SlurmdParameters=config_overrides

# Avoid requiring a mailer in minimal containers.
MailProg=/bin/true

# Disable accounting for CI.
AccountingStorageType=accounting_storage/none
JobCompType=jobcomp/none
JobAcctGatherFrequency=30
JobAcctGatherType=jobacct_gather/none

SlurmctldDebug=info
SlurmctldLogFile=/var/log/slurm/slurmctld.log
SlurmdDebug=info
SlurmdLogFile=/var/log/slurm/slurmd.log

NodeName=c1 CPUs=4 RealMemory=1000 State=UNKNOWN
NodeName=c2 CPUs=4 RealMemory=1000 State=UNKNOWN
PartitionName=normal Nodes=c1,c2 Default=YES MaxTime=INFINITE State=UP
